{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Acer/PRAKTIKUM TEKWEB/PROYEK/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Acer/PRAKTIKUM TEKWEB/PROYEK/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Acer/PRAKTIKUM TEKWEB/PROYEK/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{useParams,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProduct=function EditProduct(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),preview=_useState6[0],setPreview=_useState6[1];var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();useEffect(function(){getProductById();},[]);var getProductById=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:5000/products/\".concat(id));case 2:response=_context.sent;setTitle(response.data.name);setFile(response.data.image);setPreview(response.data.url);case 6:case\"end\":return _context.stop();}},_callee);}));return function getProductById(){return _ref.apply(this,arguments);};}();var loadImage=function loadImage(e){var image=e.target.files[0];setFile(image);setPreview(URL.createObjectURL(image));};var updateProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var formData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();formData=new FormData();formData.append(\"file\",file);formData.append(\"title\",title);_context2.prev=4;_context2.next=7;return axios.patch(\"http://localhost:5000/products/\".concat(id),formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});case 7:navigate(\"/\");_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[4,10]]);}));return function updateProduct(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"columns is-centered mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"column is-half\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:updateProduct,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:title,onChange:function onChange(e){return setTitle(e.target.value);},placeholder:\"Product Name\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"div\",{className:\"file\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"file-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"file-input\",onChange:loadImage}),/*#__PURE__*/_jsx(\"span\",{className:\"file-cta\",children:/*#__PURE__*/_jsx(\"span\",{className:\"file-label\",children:\"Choose a file...\"})})]})})})]}),preview?/*#__PURE__*/_jsx(\"figure\",{className:\"image is-128x128\",children:/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"Preview Image\"})}):\"\",/*#__PURE__*/_jsx(\"div\",{className:\"field\",children:/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"button\",{typr:\"submit\",className:\"button is-success\",children:\"Update\"})})})]})})});};export default EditProduct;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","EditProduct","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","file","setFile","_useState5","_useState6","preview","setPreview","_useParams","id","navigate","getProductById","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","data","name","image","url","stop","apply","arguments","loadImage","e","target","files","URL","createObjectURL","updateProduct","_ref2","_callee2","formData","_callee2$","_context2","preventDefault","FormData","append","patch","headers","t0","console","log","_x","className","children","onSubmit","type","value","onChange","placeholder","src","alt","typr"],"sources":["C:/Users/Acer/PRAKTIKUM TEKWEB/PROYEK/frontend/src/components/EditProduct.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport axios from 'axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\n\r\nconst EditProduct = () => {\r\n    const [title, setTitle] = useState(\"\");\r\n    const [file, setFile] = useState(\"\");\r\n    const [preview, setPreview] = useState(\"\");\r\n    const {id} = useParams();\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        getProductById();\r\n    },[]);\r\n\r\n    const getProductById = async () =>{\r\n        const response = await axios.get(`http://localhost:5000/products/${id}`);\r\n        setTitle(response.data.name);\r\n        setFile(response.data.image);\r\n        setPreview(response.data.url);\r\n    }\r\n\r\n    const loadImage = (e) => {\r\n        const image = e.target.files[0];\r\n        setFile(image);\r\n        setPreview(URL.createObjectURL(image));\r\n    };\r\n\r\n    const updateProduct = async(e) =>{\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n        formData.append(\"title\", title);\r\n        try {\r\n            await axios.patch(`http://localhost:5000/products/${id}`, formData, {\r\n                headers:{\r\n                    \"Content-Type\": \"multipart/form-data\"\r\n                }\r\n            }); \r\n            navigate(\"/\");\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n  return (\r\n    <div className=\"columns is-centered mt-5\">\r\n        <div className=\"column is-half\">\r\n            <form onSubmit={updateProduct}>\r\n                <div className=\"field\">\r\n                    <label className=\"label\">Product Name</label>\r\n                    <div className=\"control\">\r\n                        <input \r\n                        type=\"text\" \r\n                        className=\"input\" \r\n                        value={title}\r\n                        onChange={(e) => setTitle(e.target.value)}\r\n                        placeholder='Product Name'\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"field\">\r\n                    <label className=\"label\">Image</label>\r\n                    <div className=\"control\">\r\n                        <div className=\"file\">\r\n                            <label className=\"file-label\">\r\n                                <input type=\"file\" className='file-input' onChange={loadImage} />\r\n                                <span className='file-cta'>\r\n                                    <span className='file-label'>Choose a file...</span>\r\n                                </span>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {preview ? (\r\n                    <figure className='image is-128x128'>\r\n                        <img src={preview} alt=\"Preview Image\" />\r\n                    </figure>\r\n                ): (\r\n                    \"\"\r\n                )}\r\n\r\n                <div className=\"field\">\r\n                    <div className=\"control\">\r\n                        <button typr=\"submit\" className=\"button is-success\">Update</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditProduct\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}